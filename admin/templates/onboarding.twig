{% extends "layout.twig" %}

{% block title %}Onboarding Configuration{% endblock %}

{% block heading %}Onboarding Questions{% endblock %}

{% block content %}
    <div class="box">
        <form action="{{ url_for('onboarding') }}" method="post">
            <!-- Bot Mention Configuration -->
            <div class="field">
                <label class="label">Bot Mention Name</label>
                <div class="control">
                    <input class="input" type="text" name="bot_mention" value="{{ bot_mention }}" placeholder="@educai">
                </div>
                <p class="help">
                    <span class="icon-text">
                        <span class="icon has-text-info">
                            <i class="fas fa-info-circle"></i>
                        </span>
                        <span>Users must mention this name (e.g., <code>{{ bot_mention }} hello</code>) for the bot to respond. This prevents the bot from reacting to every message in the room.</span>
                    </span>
                </p>
            </div>

            <hr>

            <!-- Onboarding Questions -->
            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label">Group Chat Questions</label>
                        <div class="control">
                            <textarea class="textarea" name="group_questions" rows="8" placeholder="One question per line">{{ group_questions }}</textarea>
                        </div>
                        <p class="help">These questions will be asked in new group chats during onboarding.</p>
                    </div>
                </div>
                <div class="column">
                    <div class="field">
                        <label class="label">Direct Message Questions</label>
                        <div class="control">
                            <textarea class="textarea" name="dm_questions" rows="8" placeholder="One question per line">{{ dm_questions }}</textarea>
                        </div>
                        <p class="help">These questions will be asked in new direct messages during onboarding.</p>
                    </div>
                </div>
            </div>

            <!-- Additional Configuration Info -->
            <div class="notification is-info is-light">
                <h5 class="title is-6">How Bot Mentions Work:</h5>
                <ul>
                    <li><strong>Required:</strong> Users must include the bot mention in their message (e.g., <code>{{ bot_mention }} explain this topic</code>)</li>
                    <li><strong>Case Insensitive:</strong> Both <code>{{ bot_mention }}</code> and <code>{{ bot_mention | upper }}</code> will work</li>
                    <li><strong>Position Flexible:</strong> The mention can be anywhere in the message</li>
                    <li><strong>Without Mention:</strong> The bot will ignore the message completely to avoid spam</li>
                </ul>
            </div>

            <div class="field">
                <div class="control">
                    <button class="button is-primary" type="submit">
                        <span class="icon">
                            <i class="fas fa-save"></i>
                        </span>
                        <span>Save Configuration</span>
                    </button>
                </div>
            </div>
        </form>
    </div>
{% endblock %} 